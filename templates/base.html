<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}EduBot ‚Äî Apprends. Progresse. R√©ussis.{% endblock %}</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Tailwind Config inline -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { inter: ['Inter', 'sans-serif'] },
            colors: {
              violet: {
                50:  '#f5f3ff',
                100: '#ede9fe',
                200: '#ddd6fe',
                300: '#c4b5fd',
                400: '#a78bfa',
                500: '#8b5cf6',
                600: '#7c3aed',
                700: '#6d28d9',
                800: '#5b21b6',
                900: '#4c1d95',
              }
            },
            animation: {
              'float': 'float 6s ease-in-out infinite',
              'pulse-slow': 'pulse 4s ease-in-out infinite',
              'slide-up': 'slideUp 0.5s ease-out',
              'fade-in': 'fadeIn 0.6s ease-out',
            },
            keyframes: {
              float: {
                '0%, 100%': { transform: 'translateY(0px)' },
                '50%': { transform: 'translateY(-12px)' },
              },
              slideUp: {
                '0%': { opacity: '0', transform: 'translateY(30px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              },
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              }
            }
          }
        }
      }
    </script>

    <style>
      * { font-family: 'Inter', sans-serif; }
      
      .glass {
        background: rgba(255,255,255,0.7);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(124,58,237,0.15);
      }

      .glass-dark {
        background: rgba(109,40,217,0.15);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(167,139,250,0.3);
      }

      .gradient-text {
        background: linear-gradient(135deg, #7c3aed, #a78bfa, #7c3aed);
        background-size: 200% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shimmer 3s linear infinite;
      }

      @keyframes shimmer {
        0% { background-position: 0% center; }
        100% { background-position: 200% center; }
      }

      .btn-primary {
        background: linear-gradient(135deg, #7c3aed, #6d28d9);
        color: white;
        padding: 12px 28px;
        border-radius: 14px;
        font-weight: 600;
        font-size: 0.9rem;
        letter-spacing: 0.02em;
        transition: all 0.3s ease;
        box-shadow: 0 4px 20px rgba(124,58,237,0.35);
        border: none;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(124,58,237,0.5);
        background: linear-gradient(135deg, #6d28d9, #5b21b6);
      }

      .btn-ghost {
        background: transparent;
        color: #7c3aed;
        padding: 10px 22px;
        border-radius: 12px;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        border: 2px solid rgba(124,58,237,0.3);
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }
      .btn-ghost:hover {
        background: rgba(124,58,237,0.08);
        border-color: #7c3aed;
        transform: translateY(-1px);
      }

      .card {
        background: rgba(255,255,255,0.85);
        backdrop-filter: blur(16px);
        border: 1px solid rgba(124,58,237,0.12);
        border-radius: 24px;
        padding: 32px;
        box-shadow: 0 8px 40px rgba(124,58,237,0.08), 0 1px 3px rgba(0,0,0,0.05);
        transition: all 0.3s ease;
      }
      .card:hover {
        box-shadow: 0 16px 60px rgba(124,58,237,0.15), 0 4px 12px rgba(0,0,0,0.08);
        transform: translateY(-3px);
        border-color: rgba(124,58,237,0.25);
      }

      .input-field {
        width: 100%;
        padding: 14px 18px;
        border: 2px solid rgba(124,58,237,0.15);
        border-radius: 14px;
        font-size: 0.95rem;
        color: #1f2937;
        background: rgba(255,255,255,0.9);
        transition: all 0.3s ease;
        outline: none;
      }
      .input-field:focus {
        border-color: #7c3aed;
        box-shadow: 0 0 0 4px rgba(124,58,237,0.1);
        background: white;
      }
      .input-field::placeholder { color: #9ca3af; }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 14px;
        border-radius: 50px;
        font-size: 0.8rem;
        font-weight: 600;
        letter-spacing: 0.03em;
        text-transform: uppercase;
      }
      .badge-violet { background: rgba(124,58,237,0.12); color: #7c3aed; }
      .badge-green  { background: rgba(16,185,129,0.12); color: #059669; }
      .badge-orange { background: rgba(245,158,11,0.12); color: #d97706; }

      /* Scrollbar custom */
      ::-webkit-scrollbar { width: 6px; }
      ::-webkit-scrollbar-track { background: #f5f3ff; }
      ::-webkit-scrollbar-thumb { background: #c4b5fd; border-radius: 3px; }
      ::-webkit-scrollbar-thumb:hover { background: #7c3aed; }

      /* Orbs d√©coratifs */
      .orb {
        position: fixed;
        border-radius: 50%;
        filter: blur(80px);
        opacity: 0.15;
        pointer-events: none;
        z-index: 0;
      }
    </style>

    {% block extra_head %}{% endblock %}
</head>

<body class="bg-gradient-to-br from-violet-50 via-white to-purple-50 min-h-screen relative overflow-x-hidden">

    <!-- Orbs d√©coratifs background -->
    <div class="orb w-96 h-96 bg-violet-500 top-0 -left-32 animate-pulse-slow"></div>
    <div class="orb w-80 h-80 bg-purple-400 bottom-0 -right-20 animate-pulse-slow" style="animation-delay:2s"></div>
    <div class="orb w-64 h-64 bg-violet-300 top-1/2 left-1/2 animate-pulse-slow" style="animation-delay:4s"></div>

    <!-- ===== NAVBAR ===== -->
    <nav class="glass sticky top-0 z-50 shadow-sm" style="border-bottom:1px solid rgba(124,58,237,0.12)">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">

                <!-- Logo -->
                <a href="/" class="flex items-center gap-3 group">
                    <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-violet-600 to-purple-700 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                        <span class="text-white text-lg">üéì</span>
                    </div>
                    <span class="text-xl font-extrabold gradient-text">EduBot</span>
                    <span class="badge badge-violet text-xs hidden sm:inline-flex">v2</span>
                </a>

                <!-- Nav Links (desktop) -->
                <div class="hidden md:flex items-center gap-1">
                    {% if user.is_authenticated %}
                        <a href="{% url 'dashboard' %}" class="px-4 py-2 rounded-xl text-gray-600 hover:text-violet-600 hover:bg-violet-50 font-medium text-sm transition-all">
                            üìä Dashboard
                        </a>
                        <a href="#" class="px-4 py-2 rounded-xl text-gray-600 hover:text-violet-600 hover:bg-violet-50 font-medium text-sm transition-all">
                            üåü Culture
                        </a>
                        <a href="#" class="px-4 py-2 rounded-xl text-gray-600 hover:text-violet-600 hover:bg-violet-50 font-medium text-sm transition-all">
                            üéØ Quiz
                        </a>
                        <a href="#" class="px-4 py-2 rounded-xl text-gray-600 hover:text-violet-600 hover:bg-violet-50 font-medium text-sm transition-all">
                            üí¨ Chat IA
                        </a>
                    {% endif %}
                </div>

                <!-- Auth Buttons -->
                <div class="flex items-center gap-3">
                    {% if user.is_authenticated %}
                        <div class="hidden sm:flex items-center gap-2 glass-dark px-4 py-2 rounded-xl">
                            <div class="w-7 h-7 rounded-lg bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center">
                                <span class="text-white text-xs font-bold">{{ user.username|slice:":1"|upper }}</span>
                            </div>
                            <span class="text-violet-700 font-semibold text-sm">{{ user.username }}</span>
                        </div>
                        <a href="{% url 'logout' %}" class="btn-ghost text-sm px-4 py-2">
                            D√©connexion
                        </a>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn-ghost text-sm">Connexion</a>
                        <a href="{% url 'register' %}" class="btn-primary text-sm">
                            <span>‚ú®</span> S'inscrire
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- ===== MESSAGES ===== -->
    {% if messages %}
    <div class="max-w-7xl mx-auto px-4 pt-4 relative z-10">
        {% for message in messages %}
        <div class="animate-slide-up flex items-center gap-3 px-5 py-4 rounded-2xl mb-3 shadow-md
            {% if message.tags == 'success' %}bg-emerald-50 border border-emerald-200 text-emerald-800
            {% elif message.tags == 'error' %}bg-red-50 border border-red-200 text-red-800
            {% else %}bg-violet-50 border border-violet-200 text-violet-800{% endif %}">
            <span class="text-xl">
                {% if message.tags == 'success' %}‚úÖ{% elif message.tags == 'error' %}‚ùå{% else %}‚ÑπÔ∏è{% endif %}
            </span>
            <span class="font-medium text-sm">{{ message }}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- ===== CONTENU ===== -->
    <main class="relative z-10">
        {% block content %}{% endblock %}
    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="relative z-10 mt-24 border-t border-violet-100">
        <div class="max-w-7xl mx-auto px-4 py-10">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">üéì</span>
                    <span class="font-bold gradient-text">EduBot v2</span>
                    <span class="text-gray-400 text-sm">‚Äî par Zeus, Lom√© üáπüá¨</span>
                </div>
                <p class="text-gray-400 text-sm">Apprends. Progresse. R√©ussis. ‚Ä¢ Propuls√© par Gemini AI</p>
            </div>
        </div>
    </footer>

    {% block extra_scripts %}{% endblock %}
</body>
</html>
